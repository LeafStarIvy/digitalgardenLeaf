{# note.njk - Single Note Template #}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{{ page.title }} — {{ site.title or "Garden" }}</title>
  <meta name="description" content="{{ page.excerpt | truncate(160) }}">
  <link rel="stylesheet" href="{{ '/assets/css/custom.css' | url }}">
</head>
<body class="garden note-page">
  <canvas id="nebula-canvas" class="bg-canvas" aria-hidden="true"></canvas>
  <canvas id="star-canvas" class="bg-canvas" aria-hidden="true"></canvas>
  <canvas id="shooting-canvas" class="bg-canvas" aria-hidden="true"></canvas>

  <header class="site-header" role="banner">
    <div class="header-inner container">
      <a class="brand small" href="{{ '/' | url }}">
        <div class="brand-text">
          <div class="title">{{ site.title or "Garden" }}</div>
        </div>
      </a>
      <nav class="main-nav">
        <ul>
          <li><a href="{{ '/' | url }}">Home</a></li>
          <li><a href="#back" onclick="history.back();return false;">Back</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container site-main">
    <article class="card note-article">
      <header class="note-header">
        <h1 class="note-title">{{ page.title }}</h1>
        <div class="note-meta">
          {% if page.date %}<time datetime="{{ page.date }}">{{ page.date | date("YYYY-MM-DD") }}</time>{% endif %}
          {% if page.tags %}
            <div class="tags">
              {% for t in page.tags %}<a class="tag" href="{{ '/tags/' + t | url }}">#{{ t }}</a>{% endfor %}
            </div>
          {% endif %}
        </div>
      </header>

      <section class="note-body">
        {{ page.content | safe }}
      </section>

      <footer class="note-footer">
        <div class="nav-prev-next">
          {% if page.prev %}<a href="{{ page.prev.url | url }}" class="prev">← {{ page.prev.title }}</a>{% endif %}
          {% if page.next %}<a href="{{ page.next.url | url }}" class="next">{{ page.next.title }} →</a>{% endif %}
        </div>
      </footer>
    </article>
  </main>

  <footer class="site-footer">
    <div class="container">
      <small>© {{ (site.author or "You") }}</small>
    </div>
  </footer>

  <script>
    /* Same inline cosmic script as index.njk - keep identical for consistent visuals */
    {% include '/assets/js/cosmic-inline.njk' ignore missing %}
    /* If your pipeline doesn't support includes, the index.njk inline script will still execute if present.
       You can also place the same inline script here. */
  </script>
</body>
</html>
