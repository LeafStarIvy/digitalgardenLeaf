/* =========================================================================
   COSMIC DIGITAL GARDEN — custom-style.css
   Designed for Obsidian Digital Garden + publish templates
   Drop into /styles/custom-style.css and load from index.njk & note.njk
   =========================================================================
   File structure (numbered parts)
   PART 01 — Theme tokens & aurora palette
   PART 02 — Base reset, typography, body/root improvements
   PART 03 — Skybox, nebulae, cosmic bodies, particles preservation
   PART 04 — Header, branding, global actions, search
   PART 05 — Page shell: responsive grid with right mentions sidebar
   PART 06 — Note/article styling (H1..H6, callouts, code)
   PART 07 — Garden grid and card system (index, projects, media)
   PART 08 — Tags, filters, chips, and tag sidebar
   PART 09 — Backlinks / "On this page" / Connected pages panel
   PART 10 — Accessible UI elements, details/summary, keyboard focus
   PART 11 — Performance, prefers-reduced-motion, mobile tweaks
   PART 12 — Helpers, debug, optional theme toggles
   ========================================================================= */

/* ===========================================================
   PART 01 — THEME TOKENS & AURORA CELESTIAL PALETTE
   Purpose: single source of truth for colors, sizes & timing
   =========================================================== */
:root {
  /* --- overall scale & spacing --- */
  --max-width: 1188px;
  --gutter: 1.25rem;
  --site-padding-vertical: 1.6rem;
  --radius-lg: 14px;
  --radius-md: 10px;

  /* --- typography scale --- */
  --type-ui: Inter, "Segoe UI", Roboto, "Helvetica Neue", Arial, system-ui;
  --type-mono: "Fira Code", ui-monospace, "SFMono-Regular", Menlo, Monaco, monospace;

  --fs-base: 16px;
  --fs-xs: 12px;
  --fs-sm: 14px;
  --fs-md: 16px;
  --fs-lg: 20px;
  --fs-xl: 28px;
  --line-height: 1.6;

  /* --- aurora-inspired palette (original, not copied) --- */
  --void-0: #07060A;       /* near-black void */
  --abyss-1: #071026;
  --deep-1: #0b1630;
  --dusk-1: #132a4b;
  --twilight-1: #183a65;
  --mid-1: #224e7f;
  --sky-1: #2a66a0;
  --dawn-1: #3b86c6;
  --light-1: #8fbfe8;

  /* acccent aurora tones */
  --aur-emerald: #0fbf9a;
  --aur-cyan:    #05b8e0;
  --aur-teal:    #39c2f2;
  --aur-purple:  #7b44ed;
  --aur-rose:    #d63fd4;
  --aur-amber:   #f6ab3a;

  /* neutrals & text */
  --text-100: #eaf4ff;
  --muted-70:  #9fb6d4;
  --glass-01: rgba(12,16,26,0.44);
  --glass-02: rgba(255,255,255,0.02);
  --glass-border: rgba(125,170,255,0.06);

  /* shadows & UI */
  --shadow-deep: 0 20px 60px rgba(3,6,18,0.62);

  /* particles / sky tuning */
  --particle-opacity: 0.95;
  --sky-mood-duration: 30s;

  /* layout */
  --sidebar-w: 320px;
  --right-w: 340px;

  /* accessibility */
  --focus-ring: rgba(125,211,252,0.18);
}

/* ===========================================================
   PART 02 — BASE RESET, TYPOGRAPHY, & ROOT / BODY
   Purpose: fix tiny content, improve root look, scale header
   =========================================================== */

/* box model & reset */
*,
*::before,
*::after { box-sizing: border-box; }

html {
  font-family: var(--type-ui);
  font-size: var(--fs-base);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: var(--void-0);
  height: 100%;
  scroll-behavior: smooth;
  color: var(--text-100);
}

/* root body: stronger, layered background (not flat black) */
body {
  margin: 0;
  min-height: 100%;
  line-height: var(--line-height);
  background:
    radial-gradient(1200px 380px at 12% 10%, rgba(30,50,90,0.18), transparent 10%),
    radial-gradient(900px 280px at 84% 78%, rgba(120,40,180,0.07), transparent 15%),
    linear-gradient(180deg, var(--deep-1) 0%, var(--dusk-1) 50%, rgba(8,8,16,0.9) 100%);
  color: var(--text-100);
  padding: calc(var(--site-padding-vertical) + 0.25rem) 0 4rem 0;
  -webkit-font-variant-ligatures: none;
  -moz-osx-font-smoothing: grayscale;
}

/* utility container; center layout */
.container {
  width: min(100%, var(--max-width));
  margin: 0 auto;
  padding: 0 1rem;
}

/* consistent heading scale */
h1 { font-size: clamp(1.6rem, 2.6vw, 2.6rem); margin: 0 0 .6rem 0; letter-spacing: -0.02em; }
h2 { font-size: clamp(1.25rem, 2.2vw, 1.8rem); margin: 0 0 .45rem 0; }
h3 { font-size: 1.05rem; margin: 0 0 .35rem 0; }
h4,h5,h6 { font-size: 0.98rem; margin: 0 0 .3rem 0; }

/* paragraphs and small text */
p { margin: 0 0 1rem 0; color: var(--text-100); }
small, .meta { font-size: var(--fs-sm); color: var(--muted-70); }

/* images */
img { display:block; max-width:100%; height:auto; border-radius:10px; }

/* code fonts */
code, pre { font-family: var(--type-mono); }

/* link defaults */
a { color: var(--aur-cyan); text-decoration: none; }
a:hover, a:focus { text-decoration: underline; }

/* focus styles for keyboard users */
:focus { outline: none; }
:focus-visible {
  outline: 3px solid var(--focus-ring);
  outline-offset: 3px;
  border-radius: 6px;
}

/* small screen reader helper */
.sr-only {
  position: absolute !important;
  left: -9999px; top: auto;
  width: 1px; height: 1px; overflow: hidden;
}

/* ===========================================================
   PART 03 — SKYBOX, NEBULAE, COSMIC BODIES, PARTICLES
   Purpose: preserve particle canvas layers and create an ethereal sky
   =========================================================== */

/* SKYBOX container - put just after <body> for best visuals (optional) */
.galaxy-skybox {
  position: fixed; inset: 0;
  pointer-events: none;
  z-index: -100;
  overflow: visible;
  transform-style: preserve-3d;
  background: radial-gradient(900px 420px at 20% 18%, rgba(45,80,160,0.08), transparent 6%),
              radial-gradient(600px 300px at 82% 72%, rgba(140,40,200,0.06), transparent 8%),
              var(--void-0);
  filter: saturate(1.05) contrast(1.02);
}

/* mood cycle applied only to skybox to avoid text color shifts */
@keyframes skyMood {
  0%   { filter: hue-rotate(-8deg) saturate(1) brightness(.98); }
  25%  { filter: hue-rotate(6deg) saturate(1.06) brightness(1.01); }
  50%  { filter: hue-rotate(18deg) saturate(1.05) brightness(1.02); }
  75%  { filter: hue-rotate(6deg) saturate(1.03) brightness(1.00); }
  100% { filter: hue-rotate(-8deg) saturate(1) brightness(.98); }
}
@media (prefers-reduced-motion: no-preference) {
  .galaxy-skybox.mood-cycle { animation: skyMood var(--sky-mood-duration) linear infinite; }
}

/* nebula layers (back, mid, front) */
.nebula { position:absolute; left:-20%; top:-24%; width:140%; height:140%; border-radius:50%; mix-blend-mode:screen; pointer-events:none; filter: blur(56px) saturate(160%); opacity: 0.6; will-change:transform,opacity; }
.nebula--back { background: radial-gradient(700px 420px at 18% 32%, rgba(12,24,48,0.86), transparent 35%), radial-gradient(480px 300px at 82% 72%, rgba(123,58,220,0.28), transparent 32%); transform: translate(-6%,-4%) scale(1.06); animation: nebBack 48s ease-in-out infinite alternate; }
.nebula--mid  { background: radial-gradient(480px 260px at 62% 32%, rgba(37,90,255,0.22), transparent 38%), radial-gradient(420px 230px at 22% 70%, rgba(6,180,210,0.14), transparent 36%); transform: translate(3%,4%) scale(1.03); animation: nebMid 40s ease-in-out infinite alternate-reverse; }
.nebula--front{ background: radial-gradient(280px 180px at 32% 32%, rgba(6,180,210,0.10), transparent 45%), radial-gradient(320px 220px at 72% 72%, rgba(255,255,255,0.02), transparent 45%); transform: translate(-2%, 8%) scale(1.02); opacity:0.46; animation: nebFront 36s ease-in-out infinite alternate; }
@keyframes nebBack { to { transform: translate(-9%,-7%) scale(1.07); } }
@keyframes nebMid  { to { transform: translate(5%,6%) scale(1.05); } }
@keyframes nebFront{ to { transform: translate(-1%,10%) scale(1.03); } }

/* cosmic bodies (planets / glows) */
.cosmic-body { position: absolute; border-radius: 50%; pointer-events:none; mix-blend-mode: screen; filter: drop-shadow(0 0 42px rgba(125,211,252,0.10)); will-change: transform, opacity; opacity: .78; }
.cosmic-body.p1 { width: 520px; height:520px; top:8%; left:12%; background: radial-gradient(circle at 36% 36%, rgba(45,90,255,0.95), rgba(45,90,255,0.06) 70%, transparent 80%); animation: bodyA 36s ease-in-out infinite alternate; }
.cosmic-body.p2 { width: 420px; height:420px; top:60%; left:70%; background: radial-gradient(circle at 30% 28%, rgba(120,60,230,0.92), rgba(120,60,230,0.04) 72%, transparent 82%); animation: bodyB 30s ease-in-out infinite alternate-reverse; }
@keyframes bodyA { to { transform: translate3d(10px,18px,0) rotate(2deg) scale(1.03); } }
@keyframes bodyB { to { transform: translate3d(-14px,10px,0) rotate(-3deg) scale(1.05); } }

/* preserve particles.js layers — preserve z-index ordering and pointer-events none */
.pg-canvas { position:absolute; inset:0; width:100%; height:100%; pointer-events:none; z-index:0; mix-blend-mode: screen; opacity: var(--particle-opacity); transition: opacity 240ms ease; }
.pg-canvas--bg  { z-index: 0; opacity: calc(var(--particle-opacity) * .75); filter: blur(.6px) contrast(1.05); }
.pg-canvas--mid { z-index: 2; opacity: calc(var(--particle-opacity) * .9); filter: blur(.2px); }
.pg-canvas--fg  { z-index: 3; opacity: var(--particle-opacity); }

/* optional shooting star container */
.shooting-stars { position:absolute; inset:0; z-index:5; pointer-events:none; }

/* mild overlay to enhance legibility in content region (keeps sky visible) */
.sky-overlay { position: fixed; inset: 0; z-index: -10; pointer-events:none; background: linear-gradient(180deg, rgba(5,10,20,0.18), rgba(5,8,12,0.6)); }

/* ===========================================================
   PART 04 — HEADER, BRAND, NAV & ACTIONS
   Purpose: fix header look + sizes, make title clear and beautiful
   =========================================================== */

.site-header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 1rem;
  width: 100%;
  margin: 0 auto;
  padding: .8rem 1rem;
  max-width: var(--max-width);
  position: relative;
  z-index: 20;
}

/* header shell: glass card */
.header-shell {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:1rem;
  width: 100%;
  padding: .7rem .9rem;
  border-radius: 14px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.008));
  border: 1px solid var(--glass-border);
  backdrop-filter: blur(8px) saturate(120%);
  box-shadow: 0 8px 34px rgba(2,4,10,0.4);
}

/* brand left */
.site-brand {
  display:flex;
  gap: .85rem;
  align-items:center;
}
.site-logo {
  width:46px; height:46px; flex: 0 0 46px; border-radius: 8px;
  background: linear-gradient(135deg, var(--aur-purple), var(--aur-cyan));
  display:inline-flex; align-items:center; justify-content:center;
  color: white; font-weight:900; font-size:1rem; letter-spacing:-0.02em;
  box-shadow: 0 8px 28px rgba(23,36,60,0.36), inset 0 -6px 20px rgba(0,0,0,0.18);
}

/* site title & subtitle */
.site-title {
  font-weight: 800;
  font-size: clamp(1.2rem, 2.3vw, 1.9rem);
  margin: 0;
  line-height: 1;
  background: linear-gradient(90deg, var(--aur-teal), var(--aur-purple), var(--aur-rose));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-size: 240% 100%;
  animation: titleFlow 12s linear infinite;
}
@keyframes titleFlow { to { background-position: 100% 50%; } }

.site-sub {
  font-size: .95rem;
  color: var(--muted-70);
}

/* site actions (search, theme toggle) */
.site-actions { display:flex; gap:.55rem; align-items:center; }
.btn { display:inline-flex; align-items:center; gap:.5rem; padding: .46rem .68rem; border-radius: 999px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.008)); border: 1px solid rgba(255,255,255,0.03); color: var(--text-100); cursor:pointer; font-weight:600; transition: transform .18s ease, box-shadow .18s ease; }
.btn:hover { transform: translateY(-3px); box-shadow: 0 10px 28px rgba(0,0,0,0.45); }
.icon-btn { width:38px; height:38px; padding:0; justify-content:center; border-radius:999px; }

/* search shell — makes search look like a holographic pill */
.search-shell { display:flex; align-items:center; gap:.6rem; padding:.4rem .5rem; border-radius:999px; background: rgba(255,255,255,0.015); border: 1px solid rgba(255,255,255,0.02); width: min(680px, 52vw); }
.search-shell input[type="search"] { background:transparent; border:none; outline:none; color: var(--text-100); width:100%; font-size: var(--fs-md); padding:.35rem 0; }
.search-shell .search-icon { opacity: .9; }

/* compact header for small screens */
@media (max-width: 880px) {
  .site-actions .search-shell { display:none; }
  .site-title { font-size: 1.2rem; }
  .site-logo { width:40px; height:40px; }
}

/* ===========================================================
   PART 05 — PAGE SHELL (left nav optional, main center, right mentions)
   Purpose: fix tiny center content & ensure right "on this page" shows
   =========================================================== */

/* app-wrapper centers everything; use container for width */
.app-wrapper { display:flex; justify-content:center; width:100%; padding: 1.15rem 0 3rem 0; z-index: 10; }
.app-center { width: min(100%, var(--max-width)); margin: 0 auto; }

/* page layout: main + right sidebar */
.page-shell { display:grid; grid-template-columns: 1fr var(--right-w); gap: 1.1rem; align-items:start; }

/* allow optional left nav by adding .with-left-nav class */
.page-shell.with-left-nav { grid-template-columns: var(--sidebar-w) 1fr var(--right-w); }

/* main content card */
.content {
  padding: 1.6rem;
  border-radius: var(--radius-lg);
  background: linear-gradient(180deg, rgba(255,255,255,0.016), rgba(255,255,255,0.006));
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow-deep);
  min-width: 0; /* prevent grid overflow */
}

/* right sidebar: sticky, anchors "On this page" & mentions */
.sidebar-right {
  position: sticky; top: calc(1rem + 64px); /* below header */
  padding: 1rem;
  border-radius: 12px;
  background: linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.004));
  border: 1px solid rgba(255,255,255,0.02);
  height: fit-content;
  box-shadow: 0 12px 34px rgba(2,6,18,0.36);
  max-height: calc(100vh - 120px);
  overflow: auto;
}

/* hide right sidebar on small screens */
@media (max-width: 980px) {
  .page-shell { grid-template-columns: 1fr; }
  .sidebar-right { display:block; position:relative; margin-top: 1rem; max-height: none; overflow: visible; }
}

/* optional left nav (sidebar-left) */
.sidebar-left {
  position: sticky; top: calc(1rem + 64px);
  padding: 1rem;
  width: var(--sidebar-w);
  border-radius: 12px;
  background: linear-gradient(180deg, rgba(255,255,255,0.014), rgba(255,255,255,0.006));
  border: 1px solid rgba(255,255,255,0.02);
  box-shadow: 0 12px 34px rgba(2,6,18,0.36);
}

/* mobile adjustments */
@media (max-width: 640px) {
  body { padding-bottom: 6rem; }
  .container { padding: 0 0.8rem; }
  .site-logo { display:none; }
}

/* ===========================================================
   PART 06 — NOTE / ARTICLE STYLES: H1..H6, callouts, blockquote, code
   Purpose: readable longform with good code styling & media handling
   =========================================================== */

/* article container style */
.garden-article {
  position: relative;
  padding: 2rem 1.4rem;
  border-radius: var(--radius-lg);
  background: linear-gradient(180deg, rgba(255,255,255,0.016), rgba(255,255,255,0.004));
  border: 1px solid var(--glass-border);
  box-shadow: 0 20px 72px rgba(2,6,18,0.56);
}

/* H1 highlight */
.garden-article h1 {
  font-size: clamp(1.6rem, 3.2vw, 2.6rem);
  font-weight: 800;
  margin-bottom: .4rem;
  background: linear-gradient(90deg, var(--aur-teal), var(--aur-purple));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-size: 240% 100%;
  animation: titleFlow 10s linear infinite;
}

/* headings & anchors (for TOC) */
.garden-article h2, .garden-article h3 {
  scroll-margin-top: 84px;
  padding-left: .02rem;
}
.garden-article h2 { border-left: 3px solid rgba(255,255,255,0.02); padding-left: .9rem; margin-top: 1.1rem; margin-bottom: .45rem; }
.garden-article h3 { margin-top: .9rem; margin-bottom: .4rem; }

/* callout blocks (common in Obsidian) - detect .callout or .admonition */
.callout, .admonition, blockquote.callout {
  display:block;
  padding: .9rem 1rem;
  border-left: 4px solid rgba(255,255,255,0.04);
  background: linear-gradient(90deg, rgba(255,255,255,0.015), rgba(255,255,255,0.006));
  border-radius: 10px;
  margin: .8rem 0;
  color: var(--text-100);
}

/* blockquote styling */
blockquote {
  margin: 1rem 0; padding: .9rem 1rem;
  border-left: 3px solid rgba(255,255,255,0.04);
  background: rgba(255,255,255,0.01);
  border-radius: 8px;
  color: var(--muted-70);
  font-style: italic;
}

/* code blocks */
pre {
  background: linear-gradient(180deg, rgba(0,0,0,0.42), rgba(0,0,0,0.25));
  padding: 1rem;
  border-radius: 10px;
  overflow-x: auto;
  font-size: 0.92rem;
  border: 1px solid rgba(255,255,255,0.02);
}
code.inline {
  padding: .12rem .4rem; border-radius: 6px;
  background: rgba(255,255,255,0.02); font-family: var(--type-mono);
}

/* tables */
table {
  width:100%; border-collapse: collapse; margin: 1rem 0;
  background: rgba(255,255,255,0.01);
}
table thead th { text-align:left; padding:.6rem; border-bottom: 1px dashed rgba(255,255,255,0.03); color: var(--text-100); }
table tbody td { padding:.6rem; border-bottom: 1px dashed rgba(255,255,255,0.02); color: var(--muted-70); }

/* media embeds responsive */
.embed-responsive { position:relative; padding-bottom:56.25%; height:0; overflow:hidden; border-radius:10px; }
.embed-responsive iframe, .embed-responsive video, .embed-responsive img { position:absolute; left:0; top:0; width:100%; height:100%; border:0; }

/* figure caption */
figure figcaption { font-size:.9rem; color:var(--muted-70); margin-top:.4rem; }

/* ===========================================================
   PART 07 — GARDEN GRID & CARDS (index / projects / videos)
   Purpose: attractive card grid with consistent visual language
   =========================================================== */

.garden-grid {
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 1rem;
  align-items:start;
}

/* base card */
.garden-card {
  background: linear-gradient(180deg, rgba(255,255,255,0.014), rgba(255,255,255,0.006));
  border: 1px solid rgba(255,255,255,0.02);
  border-radius: 12px;
  padding: 1rem;
  display:flex;
  flex-direction:column;
  gap:.6rem;
  transition: transform .22s ease, box-shadow .22s ease;
  cursor:pointer;
  overflow:hidden;
  min-height: 120px;
}

/* hover & focus */
.garden-card:hover, .garden-card:focus-within {
  transform: translateY(-7px);
  box-shadow: 0 26px 74px rgba(2,6,18,0.66);
}

/* thumbnail area */
.card-media { height: 140px; border-radius: 10px; overflow:hidden; background: linear-gradient(180deg, rgba(0,0,0,0.1), rgba(0,0,0,0.22)); display:block; }

/* meta row: tags & date */
.card-meta-row { display:flex; justify-content:space-between; align-items:center; gap:.6rem; font-size:.88rem; color:var(--muted-70); }

/* excerpt / description */
.card-excerpt { color: var(--muted-70); font-size:.95rem; line-height:1.4; }

/* small media badge (video / audio icon) */
.media-badge {
  position:absolute; right: .9rem; top: .9rem;
  background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  padding:.28rem .5rem; border-radius:8px; font-weight:700; font-size:.78rem; color:var(--text-100);
  border:1px solid rgba(255,255,255,0.02);
}

/* ===========================================================
   PART 08 — TAGS, FILTERS & CHIP UI
   Purpose: filterable tag chips and tag sidebar polish
   =========================================================== */

.tag-chip {
  display:inline-flex; gap:.4rem; align-items:center;
  padding:.32rem .6rem; border-radius:999px; font-weight:700; font-size:.86rem;
  background: linear-gradient(90deg, rgba(255,255,255,0.012), rgba(255,255,255,0.006));
  border: 1px solid rgba(255,255,255,0.02);
  color: var(--text-100); cursor:pointer; transition: transform .16s ease;
}
.tag-chip:hover { transform: translateY(-4px); box-shadow: 0 10px 34px rgba(0,0,0,0.38); }
.tag-chip--active { background: linear-gradient(90deg, rgba(45,160,255,0.06), rgba(120,50,220,0.05)); border: 1px solid rgba(125,211,252,0.12); }

/* tag cloud container */
.tag-cloud { display:flex; gap:.5rem; flex-wrap:wrap; justify-content:flex-start; align-items:center; }

/* search results dropdown (small) */
.search-results {
  position:absolute; z-index:140; margin-top:.6rem; width: min(760px, calc(100% - 2rem));
  background: rgba(6,8,18,0.94); border: 1px solid rgba(255,255,255,0.02); border-radius:12px; box-shadow: 0 20px 60px rgba(2,6,18,0.6); padding:.6rem;
}

/* ===========================================================
   PART 09 — BACKLINKS, "On this page", CONNECTED PAGES PANEL
   Purpose: make right panel visually rich & useful (thumbnails + snippets)
   =========================================================== */

/* headings inside sidepanel */
.sidebar-right h3 { margin: 0 0 .6rem 0; font-size: 1.02rem; color: var(--text-100); }

/* On this page list: anchors for headings */
.on-this-page {
  display:flex; flex-direction:column; gap:.45rem; margin-bottom: .9rem;
}
.on-this-page a {
  display:block; padding:.4rem .6rem; border-radius:8px; color:var(--muted-70); text-decoration:none;
  border: 1px solid rgba(255,255,255,0.02); background: rgba(255,255,255,0.008);
}
.on-this-page a:hover { background: rgba(255,255,255,0.02); color:var(--text-100); transform: translateY(-2px); }

/* linked mentions / backlinks list */
.backlinks-list { display:flex; flex-direction:column; gap:.6rem; margin-top:.4rem; }
.backlink-item {
  display:flex; gap:.6rem; align-items:flex-start; padding:.55rem; border-radius:10px;
  background: linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.006));
  border: 1px solid rgba(255,255,255,0.02);
  transition: transform .16s ease, box-shadow .16s ease;
  cursor:pointer;
}
.backlink-item:hover { transform: translateY(-5px); box-shadow: 0 10px 26px rgba(0,0,0,0.28); }

/* backlink thumb + snippet */
.backlink-thumb { width:56px; height:46px; border-radius:8px; overflow:hidden; flex:0 0 56px; background: linear-gradient(180deg, rgba(0,0,0,0.12), rgba(0,0,0,0.3)); }
.backlink-body { display:flex; flex-direction:column; gap:.15rem; }
.backlink-title { font-weight:700; font-size:.95rem; color:var(--text-100); }
.backlink-excerpt { font-size:.9rem; color:var(--muted-70); }

/* small connected-pages counter badge */
.count-badge { display:inline-flex; padding:.18rem .42rem; border-radius:999px; background: rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.02); font-weight:700; font-size:.78rem; color:var(--text-100); }

/* ===========================================================
   PART 10 — ACCESSIBLE INTERACTIONS, DETAILS/SUMMARY & TOC
   Purpose: no-JS collapsible panels and accessible toggles
   =========================================================== */

/* style details/summary for collapsible sections (works with Obsidian created <details>) */
details { background: transparent; border-radius:8px; }
details[open] { box-shadow: 0 8px 28px rgba(2,6,18,0.44); }
summary {
  list-style: none;
  cursor: pointer;
  padding: .5rem .6rem;
  border-radius:8px;
  display:flex; align-items:center; justify-content:space-between; gap:.6rem;
  background: linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.004));
  border: 1px solid rgba(255,255,255,0.02);
}
summary::-webkit-details-marker { display:none; }

/* small chevron rotation */
summary .chev { transition: transform .22s ease; }
details[open] summary .chev { transform: rotate(90deg); }

/* Table of contents simple styles */
.toc { display:flex; flex-direction:column; gap:.3rem; margin-top:.6rem; }
.toc a { color: var(--muted-70); font-size: .95rem; padding:.4rem .6rem; border-radius:8px; text-decoration:none; display:block; }
.toc a:hover { color:var(--text-100); background: rgba(255,255,255,0.02); transform: translateY(-2px); }

/* ===========================================================
   PART 11 — PERFORMANCE, REDUCED MOTION & MOBILE
   Purpose: ensure no janky animations on low-power devices or reduced-motion
   =========================================================== */

/* respect prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
  .galaxy-skybox, .nebula, .cosmic-body, .pg-canvas, .garden-card, .site-title { animation: none !important; transition: none !important; transform: none !important; }
}

/* lighten heavy blurs on smaller screens */
@media (max-width:1280px) {
  .nebula { filter: blur(46px) saturate(140%); }
  .sky-overlay { display: none; }
}

/* small screens — stack & reduce paddings */
@media (max-width: 760px) {
  .header-shell { padding: .5rem; }
  .garden-grid { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:.8rem; }
  .card-media { height: 120px; }
  .site-header { padding: .45rem .8rem; }
  .search-shell { width: 100%; }
}

/* ===========================================================
   PART 12 — HELPERS, DEBUG, THEME SWITCH & MAINTAINER NOTES
   =========================================================== */

/* debug outlines for dev (toggle by adding .debug-outline on <body>) */
.debug-outline *[data-debug] { outline: 1px dashed rgba(255,255,255,0.06); }

/* theme variations (JS can toggle .theme-dawn / .theme-night on <body>) */
.theme-dawn {
  --aur-cyan: #6fdbe9;
  --aur-teal: #78d4c5;
  --aur-purple: #a46be9;
  --aur-rose: #ff8fc9;
  --void-0: #061022;
}
.theme-night {
  --aur-cyan: #05b8e0;
  --aur-teal:  #39c2f2;
  --aur-purple:#7b44ed;
  --aur-rose:  #d63fd4;
}

/* helpful tiny utils */
.u-right { text-align:right; }
.u-center { text-align:center; }

/* final maintainer notes (HTML hooks) - optional
   - If you can edit index.njk & note.njk: add the skybox snippet once inside <body>
   - Wrap main content in <div class="app-wrapper"><div class="app-center container"> ... and then <div class="page-shell"> <main class="content">...</main> <aside class="sidebar-right">...</aside></div></div>
   - For the "On this page" and "Connected pages" lists, add/ensure the following structure in the right sidebar:
     <aside class="sidebar-right">
       <section class="on-this-page"><h3>On this page</h3><!-- anchors --> </section>
       <section class="linked-mentions"><h3>Connected pages <span class="count-badge">12</span></h3><!-- mention items --> </section>
     </aside>
   - Part of this CSS is defensive and will style common classes like .garden-article, .garden-grid, .backlinks, .tags even if names vary.
*/

/* end of custom-style.css */
