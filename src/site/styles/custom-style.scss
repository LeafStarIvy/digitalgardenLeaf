/*
 * COSMIC DIGITAL GARDEN - DEEP SPACE THEME
 * Inspired by Super Mario Galaxy and deep space aesthetics
 * Enhanced with stellar navigation, cosmic particles, and galaxy-grade visuals
 */

// ===== 1. CORE COSMIC COLOR PALETTE =====
:root {
  /* Deep Space Foundation */
  --void-black: #000000;
  --space-deepest: #0A0A15;
  --space-deep: #0F0F23;
  --space-mid: #151530;
  --space-light: #1A1A3D;
  --space-lighter: #20204A;
  
  /* Stellar Blues - Primary Palette */
  --stellar-midnight: #1B2951;
  --stellar-deep: #243B6B;
  --stellar-medium: #2E4D85;
  --stellar-bright: #3B5F9F;
  --stellar-light: #4A71B9;
  --stellar-lightest: #5983D3;
  
  /* Galaxy Accent Colors */
  --galaxy-ice: #8FCDFF;      /* Light stellar blue */
  --galaxy-crystal: #B4E1FF;  /* Crystalline blue */
  --galaxy-powder: #D4F1FF;   /* Powder blue */
  --galaxy-whisper: #E8F7FF;  /* Whisper blue */
  
  /* Cosmic Highlights */
  --cosmic-gold: #FFD700;      /* Star gold */
  --cosmic-amber: #FFAB40;     /* Warm amber */
  --cosmic-pearl: #F0F4FF;     /* Pearl white */
  --cosmic-silver: #C5D3E8;    /* Silver blue */
  
  /* Nebula Accents (Used sparingly) */
  --nebula-violet: #6366F1;    /* Subtle violet */
  --nebula-indigo: #4F46E5;    /* Deep indigo */
  --nebula-lavender: #8B85FF;  /* Light lavender */
  
  /* Status Colors (Cosmic themed) */
  --status-success: #10B981;   /* Emerald green */
  --status-warning: #F59E0B;   /* Cosmic amber */
  --status-error: #EF4444;     /* Solar red */
  --status-info: var(--galaxy-ice);
  
  /* Opacity Levels */
  --alpha-subtle: 0.03;
  --alpha-faint: 0.06;
  --alpha-light: 0.1;
  --alpha-medium: 0.15;
  --alpha-strong: 0.25;
  --alpha-bold: 0.4;
  
  /* Gradient Definitions */
  --gradient-space: linear-gradient(135deg, var(--void-black) 0%, var(--space-deep) 35%, var(--space-mid) 100%);
  --gradient-stellar: linear-gradient(135deg, var(--stellar-deep) 0%, var(--stellar-medium) 50%, var(--stellar-bright) 100%);
  --gradient-galaxy: linear-gradient(90deg, var(--galaxy-ice) 0%, var(--stellar-lightest) 50%, var(--galaxy-crystal) 100%);
  --gradient-cosmic-text: linear-gradient(135deg, var(--galaxy-ice) 0%, var(--cosmic-silver) 100%);
  --gradient-stellar-glow: radial-gradient(circle, rgba(143, 205, 255, 0.2) 0%, transparent 70%);
  
  /* Surface Colors */
  --surface-primary: rgba(15, 15, 35, 0.95);
  --surface-secondary: rgba(21, 21, 48, 0.9);
  --surface-tertiary: rgba(27, 41, 81, 0.85);
  --surface-overlay: rgba(0, 0, 0, 0.6);
  
  /* Glass Effects */
  --glass-primary: rgba(27, 41, 81, 0.2);
  --glass-secondary: rgba(36, 59, 107, 0.15);
  --glass-highlight: rgba(143, 205, 255, 0.1);
  --glass-border: rgba(143, 205, 255, 0.2);
  
  /* Typography System */
  --font-family-primary: 'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif;
  --font-family-heading: 'Space Grotesk', 'Inter', sans-serif;
  --font-family-mono: 'JetBrains Mono', 'Fira Code', Consolas, monospace;
  
  --text-primary: var(--galaxy-ice);
  --text-secondary: var(--cosmic-silver);
  --text-tertiary: var(--stellar-lightest);
  --text-muted: var(--stellar-bright);
  --text-accent: var(--cosmic-gold);
  --text-link: var(--galaxy-crystal);
  --text-link-hover: var(--cosmic-gold);
  
  /* Spacing & Layout */
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;
  --space-3xl: 4rem;
  
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 14px;
  --radius-xl: 20px;
  --radius-full: 9999px;
  
  /* Shadows & Effects */
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.4);
  --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);
  --shadow-glow: 0 0 24px rgba(143, 205, 255, 0.3);
  --shadow-stellar: 0 0 40px rgba(143, 205, 255, 0.2);
  
  /* Transitions */
  --transition-fast: 0.15s ease;
  --transition-normal: 0.3s ease;
  --transition-slow: 0.5s ease;
  --transition-bounce: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

// ===== 2. GLOBAL BASE STYLES =====
* {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
  height: 100%;
}

body {
  margin: 0;
  padding: 0;
  font-family: var(--font-family-primary);
  font-size: 16px;
  line-height: 1.6;
  color: var(--text-primary);
  background: var(--gradient-space);
  min-height: 100vh;
  position: relative;
  overflow-x: hidden;
  
  /* Cosmic background pattern */
  &::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
      radial-gradient(circle at 20% 80%, rgba(143, 205, 255, 0.1) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(99, 102, 241, 0.1) 0%, transparent 50%),
      radial-gradient(circle at 40% 40%, rgba(143, 205, 255, 0.05) 0%, transparent 50%);
    pointer-events: none;
    z-index: -1;
  }
  
  /* Stellar dust overlay */
  &::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%238FCDFF' fill-opacity='0.03'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    pointer-events: none;
    z-index: -1;
  }
}

::selection {
  background-color: rgba(143, 205, 255, 0.3);
  color: var(--galaxy-whisper);
}

// ===== 3. TYPOGRAPHY =====
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-family-heading);
  font-weight: 700;
  line-height: 1.2;
  margin-top: 0;
  margin-bottom: var(--space-lg);
  letter-spacing: -0.025em;
}

h1 {
  font-size: 2.5rem;
  background: var(--gradient-cosmic-text);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-shadow: 0 0 30px rgba(143, 205, 255, 0.5);
  margin-bottom: var(--space-xl);
}

h2 {
  font-size: 2rem;
  color: var(--cosmic-gold);
  text-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
}

h3 {
  font-size: 1.5rem;
  color: var(--galaxy-crystal);
}

h4 {
  font-size: 1.25rem;
  color: var(--text-secondary);
}

h5, h6 {
  font-size: 1rem;
  color: var(--text-tertiary);
}

p {
  margin-bottom: var(--space-lg);
  color: var(--text-secondary);
}

// ===== 4. LINKS =====
a {
  color: var(--text-link);
  text-decoration: none;
  position: relative;
  transition: var(--transition-normal);
  
  &::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 1px;
    background: linear-gradient(90deg, var(--text-link), var(--cosmic-gold));
    transition: var(--transition-normal);
  }
  
  &:hover {
    color: var(--text-link-hover);
    text-shadow: 0 0 8px rgba(255, 215, 0, 0.6);
    
    &::after {
      width: 100%;
    }
  }
  
  &:active {
    transform: translateY(1px);
  }
}

// ===== 5. NAVIGATION BAR =====
.navbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 60px;
  background: rgba(10, 10, 21, 0.95);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid rgba(143, 205, 255, 0.2);
  z-index: 1000;
  display: flex;
  align-items: center;
  padding: 0 var(--space-lg);
  box-shadow: var(--shadow-md);
  
  .nav-brand {
    font-family: var(--font-family-heading);
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--cosmic-gold);
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    
    &:hover {
      text-shadow: 0 0 12px rgba(255, 215, 0, 0.8);
    }
  }
  
  .nav-links {
    margin-left: auto;
    display: flex;
    align-items: center;
    gap: var(--space-lg);
    
    a {
      color: var(--text-secondary);
      font-weight: 500;
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--radius-md);
      transition: var(--transition-normal);
      
      &:hover {
        color: var(--galaxy-crystal);
        background: var(--glass-highlight);
        box-shadow: var(--shadow-glow);
      }
    }
  }
}

// ===== 6. SIDEBAR (File Tree) =====
.filetree-sidebar {
  position: fixed;
  left: 0;
  top: 60px;
  width: 280px;
  height: calc(100vh - 60px);
  background: var(--surface-primary);
  backdrop-filter: blur(20px);
  border-right: 1px solid var(--glass-border);
  overflow-y: auto;
  z-index: 999;
  padding: var(--space-lg);
  
  /* Custom scrollbar */
  &::-webkit-scrollbar {
    width: 6px;
  }
  
  &::-webkit-scrollbar-track {
    background: transparent;
  }
  
  &::-webkit-scrollbar-thumb {
    background: var(--stellar-medium);
    border-radius: var(--radius-full);
    
    &:hover {
      background: var(--stellar-bright);
    }
  }
  
  .sidebar-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--cosmic-gold);
    margin-bottom: var(--space-lg);
    padding-bottom: var(--space-md);
    border-bottom: 1px solid var(--glass-border);
  }
  
  .file-tree {
    .folder, .file {
      display: block;
      padding: var(--space-sm) var(--space-md);
      margin-bottom: var(--space-xs);
      border-radius: var(--radius-sm);
      color: var(--text-secondary);
      transition: var(--transition-normal);
      position: relative;
      
      &:hover {
        background: var(--glass-highlight);
        color: var(--galaxy-crystal);
        transform: translateX(4px);
      }
      
      &.active {
        background: var(--glass-secondary);
        color: var(--cosmic-gold);
        box-shadow: var(--shadow-glow);
        
        &::before {
          content: '';
          position: absolute;
          left: 0;
          top: 0;
          bottom: 0;
          width: 3px;
          background: var(--cosmic-gold);
          border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
        }
      }
    }
    
    .folder-icon, .file-icon {
      margin-right: var(--space-sm);
      opacity: 0.7;
    }
  }
}

// ===== 7. MAIN CONTENT =====
.content {
  margin-left: 280px;
  margin-top: 60px;
  padding: var(--space-2xl);
  max-width: 800px;
  min-height: calc(100vh - 60px);
  
  /* Content cards for better organization */
  .note-content {
    background: var(--glass-primary);
    backdrop-filter: blur(20px);
    border-radius: var(--radius-lg);
    padding: var(--space-2xl);
    border: 1px solid var(--glass-border);
    box-shadow: var(--shadow-lg);
    margin-bottom: var(--space-2xl);
    position: relative;
    overflow: hidden;
    
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--galaxy-ice), transparent);
      opacity: 0.5;
    }
  }
}

// ===== 8. RIGHT SIDEBAR =====
.sidebar {
  position: fixed;
  right: 0;
  top: 60px;
  width: 300px;
  height: calc(100vh - 60px);
  background: var(--surface-primary);
  backdrop-filter: blur(20px);
  border-left: 1px solid var(--glass-border);
  padding: var(--space-lg);
  overflow-y: auto;
  z-index: 998;
  
  .sidebar-section {
    margin-bottom: var(--space-2xl);
    
    .section-title {
      font-size: 1rem;
      font-weight: 600;
      color: var(--cosmic-gold);
      margin-bottom: var(--space-lg);
      padding-bottom: var(--space-sm);
      border-bottom: 1px solid var(--glass-border);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
  }
  
  /* Table of Contents */
  .toc {
    ul {
      list-style: none;
      padding: 0;
      margin: 0;
      
      li {
        margin-bottom: var(--space-sm);
        
        a {
          color: var(--text-secondary);
          padding: var(--space-xs) var(--space-sm);
          display: block;
          border-radius: var(--radius-sm);
          transition: var(--transition-normal);
          font-size: 0.9rem;
          
          &:hover {
            background: var(--glass-highlight);
            color: var(--galaxy-crystal);
            padding-left: var(--space-md);
          }
          
          &.active {
            color: var(--cosmic-gold);
            background: var(--glass-secondary);
          }
        }
      }
    }
  }
  
  /* Backlinks */
  .backlinks {
    .backlink-item {
      padding: var(--space-md);
      background: var(--glass-secondary);
      border-radius: var(--radius-md);
      margin-bottom: var(--space-md);
      border: 1px solid var(--glass-border);
      transition: var(--transition-normal);
      
      &:hover {
        background: var(--glass-highlight);
        box-shadow: var(--shadow-glow);
      }
      
      .backlink-title {
        font-weight: 600;
        color: var(--galaxy-crystal);
        margin-bottom: var(--space-xs);
      }
      
      .backlink-context {
        font-size: 0.85rem;
        color: var(--text-muted);
        opacity: 0.8;
      }
    }
  }
}

// ===== 9. GRAPH VIEW =====
.graph-container {
  background: var(--surface-primary);
  border-radius: var(--radius-lg);
  border: 1px solid var(--glass-border);
  overflow: hidden;
  height: 300px;
  position: relative;
  
  #graph-canvas {
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center, var(--space-deep) 0%, var(--void-black) 100%);
  }
  
  /* Graph controls */
  .graph-controls {
    position: absolute;
    top: var(--space-md);
    right: var(--space-md);
    display: flex;
    gap: var(--space-sm);
    
    button {
      background: var(--glass-primary);
      border: 1px solid var(--glass-border);
      color: var(--text-secondary);
      padding: var(--space-sm);
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: var(--transition-normal);
      
      &:hover {
        background: var(--glass-highlight);
        color: var(--galaxy-crystal);
      }
    }
  }
}

// ===== 10. SEARCH =====
.search-container {
  position: relative;
  
  .search-input {
    width: 100%;
    padding: var(--space-md) var(--space-lg);
    background: var(--glass-primary);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    color: var(--text-primary);
    font-size: 1rem;
    transition: var(--transition-normal);
    
    &:focus {
      outline: none;
      border-color: var(--cosmic-gold);
      box-shadow: var(--shadow-glow);
    }
    
    &::placeholder {
      color: var(--text-muted);
    }
  }
  
  .search-results {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--surface-primary);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    margin-top: var(--space-sm);
    max-height: 400px;
    overflow-y: auto;
    z-index: 1001;
    box-shadow: var(--shadow-lg);
    
    .search-result {
      padding: var(--space-md);
      border-bottom: 1px solid var(--glass-border);
      cursor: pointer;
      transition: var(--transition-normal);
      
      &:hover {
        background: var(--glass-highlight);
      }
      
      .result-title {
        font-weight: 600;
        color: var(--galaxy-crystal);
        margin-bottom: var(--space-xs);
      }
      
      .result-excerpt {
        font-size: 0.9rem;
        color: var(--text-muted);
        line-height: 1.4;
      }
    }
  }
}

// ===== 11. CALLOUTS =====
.callout {
  background: var(--glass-secondary);
  border-left: 4px solid var(--cosmic-gold);
  border-radius: var(--radius-md);
  padding: var(--space-lg);
  margin: var(--space-lg) 0;
  border: 1px solid var(--glass-border);
  position: relative;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--cosmic-gold), transparent);
    opacity: 0.3;
  }
  
  .callout-title {
    font-weight: 600;
    color: var(--cosmic-gold);
    margin-bottom: var(--space-md);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
  }
  
  .callout-content {
    color: var(--text-secondary);
  }
  
  /* Callout variants */
  &.note {
    border-left-color: var(--status-info);
    
    .callout-title {
      color: var(--status-info);
    }
  }
  
  &.warning {
    border-left-color: var(--status-warning);
    
    .callout-title {
      color: var(--status-warning);
    }
  }
  
  &.error {
    border-left-color: var(--status-error);
    
    .callout-title {
      color: var(--status-error);
    }
  }
  
  &.success {
    border-left-color: var(--status-success);
    
    .callout-title {
      color: var(--status-success);
    }
  }
}

// ===== 12. CODE BLOCKS =====
pre, code {
  font-family: var(--font-family-mono);
  border-radius: var(--radius-sm);
}

pre {
  background: var(--space-deepest);
  border: 1px solid var(--stellar-deep);
  padding: var(--space-lg);
  overflow-x: auto;
  margin: var(--space-lg) 0;
  position: relative;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--stellar-bright), transparent);
    opacity: 0.5;
  }
  
  code {
    background: transparent;
    padding: 0;
    color: var(--galaxy-crystal);
  }
}

code {
  background: var(--space-deep);
  padding: var(--space-xs) var(--space-sm);
  color: var(--cosmic-gold);
  font-size: 0.9em;
}

// ===== 13. TABLES =====
table {
  width: 100%;
  border-collapse: collapse;
  margin: var(--space-lg) 0;
  background: var(--glass-primary);
  border-radius: var(--radius-md);
  overflow: hidden;
  border: 1px solid var(--glass-border);
  
  thead {
    background: var(--stellar-deep);
    
    th {
      padding: var(--space-lg);
      text-align: left;
      font-weight: 600;
      color: var(--cosmic-gold);
      border-bottom: 2px solid var(--glass-border);
    }
  }
  
  tbody {
    tr {
      border-bottom: 1px solid var(--glass-border);
      transition: var(--transition-normal);
      
      &:hover {
        background: var(--glass-highlight);
      }
      
      &:nth-child(even) {
        background: rgba(0, 0, 0, 0.1);
      }
    }
    
    td {
      padding: var(--space-md) var(--space-lg);
      color: var(--text-secondary);
    }
  }
}

// ===== 14. BLOCKQUOTES =====
blockquote {
  border-left: 3px solid var(--nebula-violet);
  padding-left: var(--space-lg);
  margin: var(--space-lg) 0;
  font-style: italic;
  color: var(--text-muted);
  position: relative;
  
  &::before {
    content: '"';
    font-size: 4rem;
    color: var(--nebula-violet);
    position: absolute;
    left: -10px;
    top: -20px;
    opacity: 0.3;
    font-family: serif;
  }
}

// ===== 15. LISTS =====
ul, ol {
  padding-left: var(--space-lg);
  
  li {
    margin-bottom: var(--space-sm);
    color: var(--text-secondary);
    
    &::marker {
      color: var(--cosmic-gold);
    }
  }
}

ul {
  li {
    list-style: none;
    position: relative;
    
    &::before {
      content: 'â€¢';
      color: var(--cosmic-gold);
      position: absolute;
      left: -var(--space-lg);
      font-size: 1.2em;
    }
  }
}

// ===== 16. RESPONSIVE DESIGN =====
@media (max-width: 1200px) {
  .sidebar {
    transform: translateX(100%);
    transition: var(--transition-normal);
    
    &.open {
      transform: translateX(0);
    }
  }
  
  .content {
    margin-right: 0;
  }
}

@media (max-width: 768px) {
  .filetree-sidebar {
    transform: translateX(-100%);
    transition: var(--transition-normal);
    
    &.open {
      transform: translateX(0);
    }
  }
  
  .content {
    margin-left: 0;
    padding: var(--space-lg);
  }
  
  .navbar {
    padding: 0 var(--space-md);
    
    .nav-links {
      display: none;
    }
  }
  
  h1 {
    font-size: 2rem;
  }
  
  h2 {
    font-size: 1.5rem;
  }
}

// ===== 17. UTILITY CLASSES =====
.text-center { text-align: center; }
.text-right { text-align: right; }
.text-left { text-align: left; }

.mt-0 { margin-top: 0; }
.mt-1 { margin-top: var(--space-sm); }
.mt-2 { margin-top: var(--space-md); }
.mt-3 { margin-top: var(--space-lg); }

.mb-0 { margin-bottom: 0; }
.mb-1 { margin-bottom: var(--space-sm); }
.mb-2 { margin-bottom: var(--space-md); }
.mb-3 { margin-bottom: var(--space-lg); }

.opacity-50 { opacity: 0.5; }
.opacity-75 { opacity: 0.75; }

.cosmic-glow {
  box-shadow: var(--shadow-stellar);
  animation: subtle-glow 3s ease-in-out infinite alternate;
}

@keyframes subtle-glow {
  from {
    box-shadow: var(--shadow-stellar);
  }
  to {
    box-shadow: 0 0 60px rgba(143, 205, 255, 0.4);
  }
}

// ===== 18. CUSTOM SCROLLBAR =====
* {
  scrollbar-width: thin;
  scrollbar-color: var(--stellar-medium) transparent;
}

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, var(--stellar-medium), var(--stellar-bright));
  border-radius: var(--radius-full);
  border: 1px solid var(--glass-border);
  
  &:hover {
    background: linear-gradient(180deg, var(--stellar-bright), var(--galaxy-ice));
    box-shadow: var(--shadow-glow);
  }
}

::-webkit-scrollbar-corner {
  background: transparent;
}

// ===== 19. ANIMATIONS & EFFECTS =====
@keyframes stellar-float {
  0%, 100% {
    transform: translateY(0px) rotate(0deg);
  }
  25% {
    transform: translateY(-10px) rotate(1deg);
  }
  50% {
    transform: translateY(-5px) rotate(0deg);
  }
  75% {
    transform: translateY(-15px) rotate(-1deg);
  }
}

@keyframes cosmic-pulse {
  0%, 100% {
    opacity: 0.6;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.05);
  }
}

@keyframes aurora-shimmer {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

.floating-element {
  animation: stellar-float 6s ease-in-out infinite;
}

.pulsing-element {
  animation: cosmic-pulse 4s ease-in-out infinite;
}

.shimmer-text {
  background: linear-gradient(
    45deg,
    var(--galaxy-ice) 0%,
    var(--cosmic-gold) 25%,
    var(--galaxy-crystal) 50%,
    var(--cosmic-gold) 75%,
    var(--galaxy-ice) 100%
  );
  background-size: 400% 400%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: aurora-shimmer 3s ease-in-out infinite;
}

// ===== 20. FOCUS STATES & ACCESSIBILITY =====
button, input, select, textarea, a {
  &:focus {
    outline: none;
    box-shadow: 0 0 0 2px var(--cosmic-gold);
  }
  
  &:focus-visible {
    outline: 2px solid var(--cosmic-gold);
    outline-offset: 2px;
  }
}

// ===== 21. BUTTONS & INTERACTIVE ELEMENTS =====
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-md) var(--space-lg);
  background: var(--glass-secondary);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-weight: 500;
  text-decoration: none;
  cursor: pointer;
  transition: var(--transition-normal);
  position: relative;
  overflow: hidden;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(143, 205, 255, 0.2),
      transparent
    );
    transition: var(--transition-normal);
  }
  
  &:hover {
    background: var(--glass-highlight);
    border-color: var(--cosmic-gold);
    color: var(--galaxy-crystal);
    box-shadow: var(--shadow-glow);
    transform: translateY(-2px);
    
    &::before {
      left: 100%;
    }
  }
  
  &:active {
    transform: translateY(0);
  }
  
  &.btn-primary {
    background: linear-gradient(135deg, var(--stellar-medium), var(--stellar-bright));
    border-color: var(--stellar-bright);
    color: var(--cosmic-pearl);
    
    &:hover {
      background: linear-gradient(135deg, var(--stellar-bright), var(--galaxy-ice));
      box-shadow: var(--shadow-stellar);
    }
  }
  
  &.btn-accent {
    background: linear-gradient(135deg, var(--cosmic-gold), var(--cosmic-amber));
    border-color: var(--cosmic-gold);
    color: var(--space-deepest);
    
    &:hover {
      background: linear-gradient(135deg, var(--cosmic-amber), var(--cosmic-gold));
      box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
    }
  }
}

// ===== 22. SPECIAL PAGE ELEMENTS =====
.page-header {
  text-align: center;
  margin-bottom: var(--space-3xl);
  padding: var(--space-2xl) 0;
  position: relative;
  
  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent,
      var(--cosmic-gold),
      transparent
    );
  }
  
  .page-title {
    font-size: 3rem;
    margin-bottom: var(--space-md);
    background: linear-gradient(
      135deg,
      var(--galaxy-ice) 0%,
      var(--cosmic-gold) 50%,
      var(--galaxy-crystal) 100%
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  
  .page-subtitle {
    font-size: 1.2rem;
    color: var(--text-muted);
    font-weight: 300;
  }
}

.note-metadata {
  display: flex;
  align-items: center;
  gap: var(--space-lg);
  margin-bottom: var(--space-2xl);
  padding: var(--space-md) var(--space-lg);
  background: var(--glass-primary);
  border-radius: var(--radius-md);
  border: 1px solid var(--glass-border);
  font-size: 0.9rem;
  color: var(--text-muted);
  
  .metadata-item {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    
    .icon {
      color: var(--cosmic-gold);
    }
  }
}

// ===== 23. TAG SYSTEM =====
.tag {
  display: inline-flex;
  align-items: center;
  padding: var(--space-xs) var(--space-md);
  background: var(--glass-secondary);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-full);
  font-size: 0.85rem;
  color: var(--galaxy-crystal);
  text-decoration: none;
  transition: var(--transition-normal);
  margin: 0 var(--space-xs) var(--space-sm) 0;
  
  &:hover {
    background: var(--glass-highlight);
    border-color: var(--cosmic-gold);
    color: var(--cosmic-gold);
    box-shadow: var(--shadow-glow);
  }
  
  &::before {
    content: '#';
    margin-right: var(--space-xs);
    opacity: 0.7;
  }
}

.tags-container {
  display: flex;
  flex-wrap: wrap;
  margin: var(--space-lg) 0;
}

// ===== 24. BREADCRUMB NAVIGATION =====
.breadcrumb {
  display: flex;
  align-items: center;
  margin-bottom: var(--space-lg);
  font-size: 0.9rem;
  color: var(--text-muted);
  
  .breadcrumb-item {
    display: flex;
    align-items: center;
    
    &:not(:last-child)::after {
      content: '/';
      margin: 0 var(--space-sm);
      color: var(--stellar-bright);
    }
    
    a {
      color: var(--text-muted);
      transition: var(--transition-normal);
      
      &:hover {
        color: var(--galaxy-crystal);
      }
    }
    
    &.active {
      color: var(--cosmic-gold);
      font-weight: 500;
    }
  }
}

// ===== 25. IMAGE STYLING =====
img {
  max-width: 100%;
  height: auto;
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-md);
  margin: var(--space-lg) 0;
  
  &:hover {
    box-shadow: var(--shadow-lg);
    transform: scale(1.02);
    transition: var(--transition-normal);
  }
}

figure {
  margin: var(--space-2xl) 0;
  text-align: center;
  
  img {
    margin-bottom: var(--space-md);
  }
  
  figcaption {
    font-size: 0.9rem;
    color: var(--text-muted);
    font-style: italic;
  }
}

// ===== 26. LOADING STATES =====
.loading {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 2px solid var(--glass-border);
  border-radius: 50%;
  border-top-color: var(--cosmic-gold);
  animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.skeleton {
  background: linear-gradient(
    90deg,
    var(--glass-primary) 25%,
    var(--glass-secondary) 50%,
    var(--glass-primary) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s infinite ease-in-out;
  border-radius: var(--radius-sm);
}

@keyframes skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

// ===== 27. PRINT STYLES =====
@media print {
  body {
    background: white !important;
    color: black !important;
  }
  
  .navbar,
  .filetree-sidebar,
  .sidebar {
    display: none !important;
  }
  
  .content {
    margin: 0 !important;
    padding: 0 !important;
    max-width: none !important;
  }
  
  a {
    color: black !important;
    text-decoration: underline !important;
  }
  
  * {
    box-shadow: none !important;
    text-shadow: none !important;
  }
}

// ===== 28. HIGH CONTRAST MODE =====
@media (prefers-contrast: high) {
  :root {
    --text-primary: #ffffff;
    --text-secondary: #e0e0e0;
    --text-muted: #c0c0c0;
    --cosmic-gold: #ffff00;
    --galaxy-ice: #00ffff;
    --glass-border: rgba(255, 255, 255, 0.5);
  }
}

// ===== 29. REDUCED MOTION =====
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

// ===== 30. DARK MODE TOGGLE (if needed) =====
.theme-toggle {
  position: fixed;
  bottom: var(--space-lg);
  left: var(--space-lg);
  background: var(--glass-primary);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-full);
  padding: var(--space-md);
  cursor: pointer;
  transition: var(--transition-normal);
  z-index: 1000;
  
  &:hover {
    background: var(--glass-highlight);
    box-shadow: var(--shadow-glow);
  }
  
  .theme-icon {
    width: 20px;
    height: 20px;
    color: var(--cosmic-gold);
  }
}
